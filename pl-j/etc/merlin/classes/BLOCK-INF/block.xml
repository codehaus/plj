<?xml version="1.0"?>

<container name="pl-j-test">

	<classloader>
		<classpath>
			<repository>
				<resource 
					id="avalon-framework:avalon-framework-impl" 
					version="4.1.5"/>

				<resource 
					id="avalon-framework:avalon-framework-api" 
					version="4.1.5"/>

				<resource
					id="cornerstone-sockets:cornerstone-sockets-api" 
					version="1.0"/>
				<resource 
					id="cornerstone-sockets:cornerstone-sockets-impl" 
					version="1.0"/>
				<resource
					id="excalibur-thread:excalibur-thread" 
					version="1.1.1"/>
				<resource
					id="excalibur-collections:excalibur-collections" 
					version="1.0"/>
				<resource
					id="excalibur:excalibur-threadcontext" 
					version="1.0"/>
				<resource
					id="excalibur-pool:excalibur-pool" 
					version="1.0"/>
				<resource
					id="log4j:log4j" 
					version="1.2.8"/>


				<resource 
					id="pl-j:pl-j-api" 
					version="0.0.1"/>
				<resource
					id="pl-j:pl-j-javaexecutor"
					version="0.0.1"/>
				<resource
					id="pl-j:pl-j-febe"
					version="0.0.1"/>
				<resource
					id="pl-j:pl-j-postgres"
					version="0.0.1"/>
				<resource
					id="pl-j:pl-j-glue"
					version="0.0.1"/>

			</repository>
		</classpath>
	</classloader>

	<component
		name="typemapper"
		class="org.pgj.typemapping.postgres.PostgresTypeMapper">
		<configuration>
			<map>
				<type db="int4" class="org.pgj.typemapping.postgres.PGSmallInt"/>
				<type db="varchar" class="org.pgj.typemapping.postgres.PGVarchar"/>
			</map>
		</configuration>
		<categories priority="DEBUG">
			<category name="/typemapper"/>
		</categories>
	</component>

	<component
		name="channel"
		class="org.plj.chanells.febe.FEBEChannel">
		<configuration>
			<database-encoding>en_US</database-encoding>
			<passed-encoding>en_US</passed-encoding>
			<port>1984</port>
			<socket-factory-name>plain</socket-factory-name>
		</configuration>
		<dependencies>
			<dependency key="socket-manager" source="socketmanager"/>
			<dependency key="type-mapper" source="typemapper"/>
		</dependencies>
		<categories priority="DEBUG">
			<category name="/channel"/>
		</categories>
	</component>

	<component
		name="socketmanager"
		class="org.apache.avalon.cornerstone.blocks.sockets.DefaultSocketManager">
		<configuration>
			<server-sockets>
				<factory name="plain"
					class="org.apache.avalon.cornerstone.blocks.sockets.DefaultServerSocketFactory" />
			</server-sockets>
			<client-sockets>
				<factory name="plain"
					class="org.apache.avalon.cornerstone.blocks.sockets.DefaultSocketFactory" />
			</client-sockets>
		</configuration>
		<categories priority="DEBUG">
			<category name="/socketmanager"/>
		</categories>
	</component>

	<component
		name="classloader"
		class="org.pgj.jexec.FSClassLoader">
		<configuration>
			<root>/tmp/</root>
		</configuration>
		<categories priority="DEBUG">
			<category name="/classloader"/>
		</categories>
	</component>

	<component
		name="executor"
		class="org.pgj.jexec.JavaExecutor">
		<dependencies>
			<dependency key="classloader" source="classloader"/>
		</dependencies>
		<configuration>
			<tempDir>/tmp/</tempDir>
		</configuration>
		<categories priority="DEBUG">
			<category name="/executor"/>
		</categories>
	</component>

	<component
		name="glue"
		class="org.pgj.glue.Glue">
		<dependencies>
			<dependency key="channel" source="channel"/>
			<dependency key="executor" source="executor"/>
		</dependencies>
		<categories priority="DEBUG">
			<category name="/glue"/>
		</categories>
	</component>

</container>